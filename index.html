<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Self-Dev App</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --tg-bg: var(--tg-theme-bg-color, #ffffff);
            --tg-text: var(--tg-theme-text-color, #000000);
            --tg-link: var(--tg-theme-link-color, #2481cc);
            --tg-sec-bg: var(--tg-theme-secondary-bg-color, #f4f4f5);
        }

        body {
            background-color: var(--tg-bg);
            color: var(--tg-text);
            font-family: sans-serif;
            margin: 0;
            padding-bottom: 80px; /* –ú–µ—Å—Ç–æ –ø–æ–¥ –º–µ–Ω—é */
            overflow-x: hidden;
        }

        /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —Å—Ç—Ä–∞–Ω–∏—Ü */
        .page { display: none; padding: 20px; text-align: center; animation: fadeIn 0.3s; }
        .active { display: block; }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* –¢–∞–±-–±–∞—Ä (–ú–µ–Ω—é —Å–Ω–∏–∑—É) */
        .tab-bar {
            position: fixed;
            bottom: 0;
            width: 100%;
            display: flex;
            background: var(--tg-sec-bg);
            border-top: 1px solid #ccc;
            height: 65px;
        }

        .tab-item {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            cursor: pointer;
            color: var(--tg-text);
            opacity: 0.6;
        }

        .tab-item.active-tab { opacity: 1; color: var(--tg-link); font-weight: bold; }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ */
        .main-btn {
            background: var(--tg-link);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 12px;
            font-size: 18px;
            margin-top: 20px;
        }

        /* –¢–∞–π–º–µ—Ä –∏ –ú–µ–¥–∏—Ç–∞—Ü–∏—è */
        #breathStatus { font-size: 24px; font-weight: bold; color: var(--tg-link); margin-top: 20px; }
        #timerDisplay { font-size: 48px; margin: 20px 0; }

        /* –°–ø–∏—Å–æ–∫ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π */
        .exercise-card {
            background: var(--tg-sec-bg);
            padding: 15px;
            margin: 10px 0;
            border-radius: 10px;
            text-align: left;
        }
    </style>
</head>
<body>

    <div id="meditation" class="page active">
        <h2>–ú–µ–¥–∏—Ç–∞—Ü–∏—è ¬´–ö–≤–∞–¥—Ä–∞—Ç¬ª üßò‚Äç‚ôÇÔ∏è</h2>
        <div id="breathStatus">–ì–æ—Ç–æ–≤—ã?</div>
        <button class="main-btn" id="startBreath">–ù–∞—á–∞—Ç—å</button>
    </div>

    <div id="pomodoro" class="page">
        <h2>–ü–æ–º–∏–¥–æ—Ä üçÖ</h2>
        <div id="timerDisplay">25:00</div>
        <button class="main-btn" id="startTimer">–°—Ç–∞—Ä—Ç</button>
        <button class="main-btn" style="background:gray;" id="resetTimer">–°–±—Ä–æ—Å</button>
    </div>

    <div id="workout" class="page">
        <h2>–£–ø—Ä–∞–∂–Ω–µ–Ω–∏—è üí™</h2>
        <div class="exercise-card">
            <strong>–ì—Ä—É–¥—å:</strong> –û—Ç–∂–∏–º–∞–Ω–∏—è, –ñ–∏–º –≥–∞–Ω—Ç–µ–ª–µ–π.
        </div>
        <div class="exercise-card">
            <strong>–°–ø–∏–Ω–∞:</strong> –ü–æ–¥—Ç—è–≥–∏–≤–∞–Ω–∏—è, –¢—è–≥–∞ –±–ª–æ–∫–∞.
        </div>
        <div class="exercise-card">
            <strong>–ù–æ–≥–∏:</strong> –ü—Ä–∏—Å–µ–¥–∞–Ω–∏—è, –í—ã–ø–∞–¥—ã.
        </div>
    </div>

    <nav class="tab-bar">
        <div class="tab-item active-tab" onclick="openPage('meditation', this)">
            <span>üßò</span><span>–î—ã—Ö–∞–Ω–∏–µ</span>
        </div>
        <div class="tab-item" onclick="openPage('pomodoro', this)">
            <span>‚è±Ô∏è</span><span>–¢–∞–π–º–µ—Ä</span>
        </div>
        <div class="tab-item" onclick="openPage('workout', this)">
            <span>üí™</span><span>–ó–∞–ª</span>
        </div>
    </nav>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        // 1. –õ–û–ì–ò–ö–ê –ü–ï–†–ï–ö–õ–Æ–ß–ï–ù–ò–Ø –í–ö–õ–ê–î–û–ö
        function openPage(pageId, el) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.querySelectorAll('.tab-item').forEach(t => t.classList.remove('active-tab'));
            
            document.getElementById(pageId).classList.add('active');
            el.classList.add('active-tab');
        }

        // 2. –õ–û–ì–ò–ö–ê –ú–ï–î–ò–¢–ê–¶–ò–ò
        const breathBtn = document.getElementById('startBreath');
        const breathStatus = document.getElementById('breathStatus');
        
        breathBtn.addEventListener('click', () => {
            breathBtn.style.display = 'none';
            const cycle = [
                { text: "–í–¥–æ—Ö...", time: 4000 },
                { text: "–ó–∞–¥–µ—Ä–∂–∏—Ç–µ –¥—ã—Ö–∞–Ω–∏–µ...", time: 4000 },
                { text: "–í—ã–¥–æ—Ö...", time: 4000 }
            ];
            
            let i = 0;
            function runCycle() {
                breathStatus.innerText = cycle[i].text;
                setTimeout(() => {
                    i = (i + 1) % cycle.length;
                    runCycle();
                }, cycle[i].time);
            }
            runCycle();
        });

        // 3. –õ–û–ì–ò–ö–ê –¢–ê–ô–ú–ï–†–ê (–ü–û–ú–ò–î–û–†)
        let timer;
        let timeLeft = 25 * 60;
        const display = document.getElementById('timerDisplay');

        function updateDisplay() {
            let mins = Math.floor(timeLeft / 60);
            let secs = timeLeft % 60;
            display.innerText = `${mins}:${secs < 10 ? '0' : ''}${secs}`;
        }

        document.getElementById('startTimer').addEventListener('click', () => {
            if (timer) return;
            timer = setInterval(() => {
                if (timeLeft > 0) {
                    timeLeft--;
                    updateDisplay();
                } else {
                    clearInterval(timer);
                    tg.HapticFeedback.notificationOccurred('success'); // –í–∏–±—Ä–æ–æ—Ç–∫–ª–∏–∫!
                    alert('–í—Ä–µ–º—è –≤—ã—à–ª–æ!');
                }
            }, 1000);
        });

        document.getElementById('resetTimer').addEventListener('click', () => {
            clearInterval(timer);
            timer = null;
            timeLeft = 25 * 60;
            updateDisplay();
        });
    </script>
</body>
</html>
